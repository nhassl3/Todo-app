(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{58:function(e,t,a){e.exports=a(83)},66:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(53),r=a.n(l),c=(a(66),a(16)),s=a(9),m=(a(67),a(86));var u=new class{getAll(e){return m.a.defaults.headers.common.Authorization="Token "+e,m.a.get("https://nhassl3.pythonanywhere.com/api/todos/")}createTodo(e,t){return m.a.defaults.headers.common.Authorization="Token "+t,m.a.post("https://nhassl3.pythonanywhere.com/api/todos/create/",e)}updateTodo(e,t,a){return m.a.defaults.headers.common.Authorization="Token "+a,m.a.put("https://nhassl3.pythonanywhere.com/api/todos/".concat(e,"/"),t)}deleteTodo(e,t){return m.a.defaults.headers.common.Authorization="Token "+t,m.a.delete("https://nhassl3.pythonanywhere.com/api/todos/".concat(e,"/"))}completeTodo(e,t){return m.a.defaults.headers.common.Authorization="Token "+t,m.a.put("https://nhassl3.pythonanywhere.com/api/todos/".concat(e,"/complete/"))}login(e){return m.a.post("https://nhassl3.pythonanywhere.com/api/login/",e)}signup(e){return m.a.post("https://nhassl3.pythonanywhere.com/api/signup/",e)}},i=a(8),d=a(19),p=a(26);var h=e=>{let t=!1,a="",l="";e.location.state&&e.location.state.currentTodo&&(t=!0,a=e.location.state.currentTodo.title,l=e.location.state.currentTodo.memo);const[r,s]=Object(n.useState)(a),[m,h]=Object(n.useState)(l),[g,E]=Object(n.useState)(!1);return o.a.createElement(p.a,null,g?o.a.createElement("div",null,o.a.createElement("h4",null,"Todo submitted successfully"),o.a.createElement(c.b,{to:"/todos/"},"Back to Todos")):o.a.createElement(i.a,null,o.a.createElement(i.a.Group,{className:"mb-3"},o.a.createElement(i.a.Label,null,t?"Edit":"Create"," Todo"),o.a.createElement(i.a.Control,{type:"text",required:!0,placeholder:"e.g. buy gift tomorrow",value:r,onChange:e=>{const t=e.target.value;s(t)}})),o.a.createElement(i.a.Group,{className:"mb-3"},o.a.createElement(i.a.Label,null,"Description"),o.a.createElement(i.a.Control,{as:"textarea",rows:3,value:m,onChange:e=>{const t=e.target.value;h(t)}})),o.a.createElement(d.a,{variant:"info",onClick:()=>{var a={title:r,memo:m,completed:!1};t?u.updateTodo(e.location.state.currentTodo.id,a,e.token).then(e=>{E(!0)}).catch(e=>{console.error("Add todo",e.toString())}):u.createTodo(a,e.token).then(e=>{E(!0)}).catch(e=>{console.error("Add To-do create",e.toString())})}},t?"Edit":"Add"," To-do")))},g=a(55),E=a.n(g),b=a(38),v=a(57);var k=e=>{const[t,a]=Object(n.useState)([]);Object(n.useEffect)(()=>{l()},[e.token]);const l=()=>{u.getAll(e.token).then(e=>{a(e.data)}).catch(e=>{console.log(e)})};return o.a.createElement(p.a,null,null===e.token||""===e.token?o.a.createElement(v.a,{variant:"warning"},"You are not logged in. Please ",o.a.createElement(c.b,{to:"/login"},"login")," to see your todos."):o.a.createElement("div",null,o.a.createElement(c.b,{to:"/todos/create"},o.a.createElement(d.a,{variant:"outline-info",className:"mb-3"},"Add To-do")),t.map(t=>o.a.createElement(b.a,{key:t.id,className:"mb-3"},o.a.createElement(b.a.Body,null,o.a.createElement("div",{className:"".concat(t.completed?"text-decoration-line-through":"")},o.a.createElement(b.a.Title,null,t.title),o.a.createElement(b.a.Text,null,o.a.createElement("b",null,"Memo:")," ",t.memo),o.a.createElement(b.a.Text,{className:"mb-2"},"Date created: ",E()(t.created).format("Do MMMM YYYY"))),o.a.createElement(o.a.Fragment,null,t.completed?"":o.a.createElement(c.b,{to:{pathname:"/todos/"+t.id,state:{currentTodo:t}}},o.a.createElement(d.a,{variant:"outline-info",className:"me-2"},"Edit"))),o.a.createElement(d.a,{variant:"outline-danger",onClick:()=>(t=>{u.deleteTodo(t,e.token).then(e=>{l()}).catch(e=>{console.error("Deleting",e.toString())})})(t.id),className:"me-2"},"Delete"),o.a.createElement(d.a,{variant:"outline-success",onClick:()=>(t=>{u.completeTodo(t,e.token).then(e=>{l()}).catch(e=>{console.error("Complete Todo",e.toString())})})(t.id)},"Complete"))))))};var y=e=>{const[t,a]=Object(n.useState)(""),[l,r]=Object(n.useState)("");return o.a.createElement(p.a,null,o.a.createElement(i.a,null,o.a.createElement(i.a.Group,{className:"mb-3"},o.a.createElement(i.a.Label,null,"Username"),o.a.createElement(i.a.Control,{type:"text",placeholder:"Enter username",value:t,onChange:e=>{a(e.target.value)}})),o.a.createElement(i.a.Group,{className:"mb-3"},o.a.createElement(i.a.Label,null,"Password"),o.a.createElement(i.a.Control,{type:"password",placeholder:"Enter password",value:l,onChange:e=>{r(e.target.value)}})),o.a.createElement(d.a,{variant:"primary",onClick:()=>{e.login({username:t,password:l}),e.history.push("/")}},"Login")))};var T=e=>{const[t,a]=Object(n.useState)(""),[l,r]=Object(n.useState)("");return o.a.createElement(p.a,null,o.a.createElement(i.a,null,o.a.createElement(i.a.Group,{className:"mb-3"},o.a.createElement(i.a.Label,null,"Username"),o.a.createElement(i.a.Control,{type:"text",placeholder:"Enter your username",value:t,onChange:e=>{a(e.target.value)}})),o.a.createElement(i.a.Group,{className:"mb-3"},o.a.createElement(i.a.Label,null,"Password"),o.a.createElement(i.a.Control,{type:"password",placeholder:"Enter your password",value:l,onChange:e=>{r(e.target.value)}})),o.a.createElement(d.a,{variant:"primary",onClick:()=>{e.signup({username:t,password:l}),e.history.push("/")}},"Sign up")))},w=a(56),S=a(40);var f=function(){const[e,t]=o.a.useState(null),[a,n]=o.a.useState(null),[l,r]=o.a.useState("");async function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u.login(e).then(a=>{n(a.data.token),t(e.username),localStorage.setItem("token",a.data.token),localStorage.setItem("user",e.username),r("")}).catch(e=>{console.log("login",e.toString()),r(e.toString())})}async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u.signup(e).then(a=>{n(a.data.token),t(e.username),localStorage.setItem("token",a.data.token),localStorage.setItem("user",e.username)}).catch(e=>{console.log("signup",e.toString()),r(e.toString())})}return o.a.createElement("div",{className:"App"},o.a.createElement(S.a,{bg:"primary",variant:"dark"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement(S.a.Brand,null,"TodosApp"),o.a.createElement(w.a,{className:"me-auto"},o.a.createElement(S.a,null,o.a.createElement(c.b,{className:"nav-link",to:"/todos"},"Todos"),e?o.a.createElement(c.b,{className:"nav-link",onClick:async function(){n(""),t(""),localStorage.setItem("token",""),localStorage.setItem("user","")}},"Logout (",e,")"):o.a.createElement(o.a.Fragment,null,o.a.createElement(c.b,{className:"nav-link",to:"/login"},"Login"),o.a.createElement(c.b,{className:"nav-link",to:"/signup"},"Sign Up")))))),o.a.createElement("div",{className:"container mt-4"},o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:["/","/todos"],render:e=>o.a.createElement(k,Object.assign({},e,{token:a}))}),o.a.createElement(s.a,{path:"/todos/create",render:e=>o.a.createElement(h,Object.assign({},e,{token:a}))}),o.a.createElement(s.a,{path:"/todos/:id/",render:e=>o.a.createElement(h,Object.assign({},e,{token:a}))}),o.a.createElement(s.a,{path:"/login",render:e=>o.a.createElement(y,Object.assign({},e,{login:m}))}),o.a.createElement(s.a,{path:"/signup",render:e=>o.a.createElement(T,Object.assign({},e,{signup:i}))}))),o.a.createElement("footer",{className:"text-center text-lg-start \r bg-light text-muted mt-4 navbar fixed-bottom"},o.a.createElement("div",{className:"text-center p-4"},"\xa9 Copyright -"," ",o.a.createElement("a",{target:"_blank",className:"text-reset fw-bold text-decoration-none",href:"https://twitter.com/greglim81"},"Matthew Nhassl3")," ","-"," ",o.a.createElement("a",{target:"_blank",className:"text-reset fw-bold text-decoration-none",href:"https://twitter.com/danielgarax"},"Matthew Nhassle"))))};var N=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,87)).then(t=>{let{getCLS:a,getFID:n,getFCP:o,getLCP:l,getTTFB:r}=t;a(e),n(e),o(e),l(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(c.a,null,o.a.createElement(f,null)))),N()}},[[58,1,2]]]);
//# sourceMappingURL=main.7cff4b46.chunk.js.map